<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Carousel â€“ Spondle</title>
  <meta name="color-scheme" content="dark" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.js"></script>

  <style>
    body { background:#000; color:#fff; font-family:ui-sans-serif,system-ui,sans-serif; min-height:100vh; }
    .card { background:#0f172a; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.45); }
    .input-dark { background:#0b1220; color:#fff; width:100%; }
    .input-dark::placeholder { color:#9ca3af; }
    .input-dark:focus { border-color:#3b82f6 !important; outline:none; box-shadow:0 0 0 1.5px #3b82f6; }

    .nav-btn {
      position:absolute; top:50%; transform:translateY(-50%);
      background:rgba(0,0,0,.55); border:1px solid #374151;
      width:40px; height:40px; border-radius:9999px;
      display:flex; align-items:center; justify-content:center;
      color:#e5e7eb; z-index:10;
    }
    .nav-btn:hover { background:rgba(0,0,0,.75); color:#fff; border-color:#4b5563; }
    .nav-left  { left:10px; }
    .nav-right { right:10px; }

    .dot { width:8px; height:8px; border-radius:9999px; display:inline-block; background:#374151; margin:0 4px; }
    .dot-active { background:#3b82f6; } /* updated blue */

    /* Slider container and animation */
    .slider-wrapper {
      position:relative;
      overflow:hidden;
      border-radius:12px;
      border:1px solid #374151;
      background:#0b1220;
      height:20rem; /* h-80 */
    }
    .slider {
      display:flex;
      transition:transform 0.6s ease-in-out;
      height:100%;
    }
    .slide {
      flex-shrink:0;
      width:100%;
      height:100%;
      position:relative;
    }
    .slide img {
      width:100%;
      height:100%;
      object-fit:cover;
      border-radius:12px;
    }
  </style>
</head>

<body class="flex items-start justify-center py-10">
  <div class="card w-full max-w-xl p-6">
    <h1 class="text-3xl font-bold text-white mb-6">Image Carousel Demo</h1>

    <div class="mb-6">
      <label for="category" class="block text-sm text-gray-300 mb-2">Event Category &amp; Image</label>
      <select id="category" class="input-dark p-3 rounded-lg border border-gray-700">
        <option value="">Select category</option>
        <option value="music">Music</option>
        <option value="comedy">Comedy</option>
        <option value="theatre">Theatre</option>
        <option value="sports">Sports</option>
        <option value="festival">Festival</option>
        <option value="quiz">Quiz Night</option>
      </select>
    </div>

    <!-- Slider -->
    <div class="relative w-full">
      <div class="slider-wrapper">
        <div id="slider" class="slider">
          <div class="slide">
            <img src="./images/file_000000002f686243b31639a2bca68eca.png" alt="Placeholder" />
          </div>
        </div>
      </div>

      <!-- Nav buttons -->
      <button id="prevBtn" class="nav-btn nav-left hidden" aria-label="Previous">&#10094;</button>
      <button id="nextBtn" class="nav-btn nav-right hidden" aria-label="Next">&#10095;</button>
    </div>

    <div id="dots" class="flex items-center justify-center mt-4 min-h-6"></div>
  </div>

  <script>
    const IMG_W = 1600, IMG_Q = 70;
    const u = id => `https://images.unsplash.com/photo-${id}?auto=format&fit=crop&w=${IMG_W}&q=${IMG_Q}`;
    const stock = {
      music: [
        u("1511379938547-c1f69419868d"),
        u("1506157786151-b8491531f063"),
        u("1507874457470-272b3c8d8ee2"),
        u("1470225620780-dba8ba36b745"),
        u("1497032628192-86f99bcd76bc")
      ],
      comedy: [
        u("1511671782779-c97d3d27a1d4"),
        u("1485217988980-11786ced9454"),
        u("1475724017904-b712052c192a"),
        u("1515165562835-c3b8c34a47af"),
        u("1492684223066-81342ee5ff30")
      ],
      theatre: [
        u("1500530855697-b586d89ba3ee"),
        u("1485562298395-226cb9c57f45"),
        u("1442504028989-ab58b5f29a4a"),
        u("1501785888041-af3ef285b470"),
        u("1515169067865-5387ec356754")
      ],
      sports: [
        u("1461896836934-ffe607ba8211"),
        u("1502877338535-766e1452684a"),
        u("1505839673365-e3971f8d9184"),
        u("1521412644187-c49fa049e84d"),
        u("1508804185872-d7badad00f7d")
      ],
      festival: [
        u("1533105079780-92b9be482077"),
        u("1492683513054-55277abccd3c"),
        u("1500534314209-a25ddb2bd429"),
        u("1502136969935-8d0710a0d652"),
        u("1495567720989-cebdbdd97913")
      ],
      quiz: [
        u("1483721310020-03333e577078"),
        u("1512428559087-560fa5ceab42"),
        u("1496307042754-b4aa456c4a2d"),
        u("1504711434969-e33886168f5c"),
        u("1514525253161-7a46d19cd819")
      ]
    };

    const catSel = document.getElementById("category");
    const slider = document.getElementById("slider");
    const dots = document.getElementById("dots");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let currentCategory = "";
    let currentIndex = 0;
    let slides = [];

    function preloadImages(urls) {
      urls.forEach(src => { const img = new Image(); img.src = src; });
    }

    function renderSlides(images) {
      slider.innerHTML = "";
      slides = images.map(src => {
        const div = document.createElement("div");
        div.className = "slide";
        const img = document.createElement("img");
        img.src = src;
        img.alt = "Event image";
        div.appendChild(img);
        slider.appendChild(div);
        return div;
      });
      updateSliderPosition();
    }

    function renderDots(count) {
      dots.innerHTML = "";
      for (let i = 0; i < count; i++) {
        const dot = document.createElement("span");
        dot.className = "dot" + (i === currentIndex ? " dot-active" : "");
        dot.addEventListener("click", () => {
          currentIndex = i;
          updateSliderPosition();
        });
        dots.appendChild(dot);
      }
    }

    function updateSliderPosition() {
      slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      const dotElements = dots.querySelectorAll(".dot");
      dotElements.forEach((d, i) => d.classList.toggle("dot-active", i === currentIndex));
    }

    function setControlsVisible(visible) {
      prevBtn.classList.toggle("hidden", !visible);
      nextBtn.classList.toggle("hidden", !visible);
      dots.classList.toggle("invisible", !visible);
    }

    function selectCategory(cat) {
      currentCategory = cat;
      currentIndex = 0;
      if (!cat) {
        slider.innerHTML = `
          <div class="slide">
            <img src="./images/file_000000002f686243b31639a2bca68eca.png" alt="Placeholder" />
          </div>`;
        setControlsVisible(false);
        dots.innerHTML = "";
        return;
      }
      const imgs = stock[cat];
      preloadImages(imgs);
      renderSlides(imgs);
      renderDots(imgs.length);
      setControlsVisible(true);
    }

    catSel.addEventListener("change", e => selectCategory(e.target.value));

    prevBtn.addEventListener("click", () => {
      if (!currentCategory) return;
      currentIndex = (currentIndex - 1 + slides.length) % slides.length;
      updateSliderPosition();
    });

    nextBtn.addEventListener("click", () => {
      if (!currentCategory) return;
      currentIndex = (currentIndex + 1) % slides.length;
      updateSliderPosition();
    });

    // Swipe gesture for mobile
    let startX = 0;
    slider.addEventListener("touchstart", e => { startX = e.touches[0].clientX; }, false);
    slider.addEventListener("touchend", e => {
      if (!currentCategory) return;
      const diff = e.changedTouches[0].clientX - startX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        else currentIndex = (currentIndex + 1) % slides.length;
        updateSliderPosition();
      }
    }, false);

    selectCategory("");
  </script>
</body>
</html>
