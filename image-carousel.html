<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spondle â€“ Image Carousel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .img-wrapper {
      border-radius: 0.5rem;
      overflow: hidden;
      background-clip: padding-box;
      border: 3px solid transparent;
      transition: border-color 0.25s ease;
    }
    .img-wrapper.selected {
      border-color: #22c55e;
    }
  </style>
</head>
<body class="bg-black text-white min-h-screen">
  <main class="max-w-2xl mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-4">Choose a Stock Image</h1>

    <label for="stockCategory" class="block mb-2 text-sm text-gray-300">Category</label>
    <select id="stockCategory" class="w-full p-2 bg-gray-800 border border-gray-600 rounded mb-4">
      <option value="">Select stock category</option>
      <option value="music">Music</option>
      <option value="comedy">Comedy</option>
      <option value="theatre">Theatre</option>
      <option value="sports">Sports</option>
      <option value="festival">Festival</option>
    </select>

    <div id="carouselTrack" class="flex no-scrollbar overflow-x-auto snap-x snap-mandatory scroll-smooth -mx-1 px-1 pb-2"></div>
    <p class="text-xs text-gray-400 mt-2">Swipe/scroll to browse. Tap an image to select it.</p>

    <div class="mt-4 text-sm text-gray-300">
      Selected URL: <span id="selectedUrl" class="text-green-400 break-all"></span>
    </div>
  </main>

  <script>
    const stockImages = {
      festival: [
        "https://images.unsplash.com/photo-1507874457470-272b3c8d8ee2?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1514525253161-7a46d19cd819?auto=format&fit=crop&w=1200&q=80"
      ],
      comedy: [
        "https://images.unsplash.com/photo-1525182008055-f88b95ff7980?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1521119989659-a83eee488004?auto=format&fit=crop&w=1200&q=80"
      ],
      music: [
        "https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=1200&q=80"
      ],
      theatre: [
        "https://images.unsplash.com/photo-1505666287802-931dc83948e0?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1200&q=80"
      ],
      sports: [
        "https://images.unsplash.com/photo-1505842465776-3acb9e92c0f0?auto=format&fit=crop&w=1200&q=80",
        "https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?auto=format&fit=crop&w=1200&q=80"
      ]
    };

    const cat = document.getElementById("stockCategory");
    const track = document.getElementById("carouselTrack");
    const selectedOut = document.getElementById("selectedUrl");

    function makeFallback() {
      const div = document.createElement("div");
      div.className = "w-full h-full bg-gray-800 flex items-center justify-center";
      div.innerHTML = '<span class="text-xs text-gray-400">Image failed</span>';
      return div;
    }

    function buildCarousel(category) {
      track.innerHTML = "";
      selectedOut.textContent = "";
      const urls = stockImages[category] || [];

      urls.forEach((url, i) => {
        const slide = document.createElement("div");
        slide.className = "shrink-0 min-w-full snap-start px-1";

        const wrapper = document.createElement("div");
        wrapper.className = "img-wrapper";

        const img = document.createElement("img");
        img.src = url;
        img.alt = `${category} image ${i + 1}`;
        img.className = "w-full h-40 object-cover";
        img.onerror = () => img.replaceWith(makeFallback());

        wrapper.appendChild(img);
        slide.appendChild(wrapper);
        track.appendChild(slide);

        wrapper.addEventListener("click", () => {
          track.querySelectorAll(".img-wrapper").forEach(w => w.classList.remove("selected"));
          wrapper.classList.add("selected");
          selectedOut.textContent = url;
        });
      });
    }

    cat.addEventListener("change", () => buildCarousel(cat.value));
  </script>
</body>
</html>
