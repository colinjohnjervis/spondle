<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Create Event â€“ Spondle (Template)</title>
  <meta name="color-scheme" content="dark" />

  <!-- Tailwind + Flowbite -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.js"></script>

  <!-- Flowbite Datepicker (for schedule drop-in later) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite-datepicker/1.3.3/datepicker.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite-datepicker/1.3.3/datepicker.min.js"></script>

  <!-- (Optional) Your global CSS -->
  <link rel="stylesheet" href="./spondle-layout.css?v=global-9">
  <link rel="stylesheet" href="./styles.css?v=global-9">

  <style>
    /* === Lifted 1:1 from image-carousel.html === */
    body { background:#000; color:#fff; font-family:ui-sans-serif,system-ui,sans-serif; min-height:100vh; }
    .card { background:#0f172a; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.45); }
    .input-dark { background:#0b1220; color:#fff; width:100%; }
    .input-dark::placeholder { color:#9ca3af; }
    .input-dark:focus { border-color:#3b82f6 !important; outline:none; box-shadow:0 0 0 1.5px #3b82f6; }
    /* dashed placeholder panels to mirror your demo look */
    .placeholder-panel { border:1px dashed #374151; background:#0b1220; border-radius:12px; }
  </style>
</head>

<body>
  <!-- Header / Sidebar hooks (if you want them visible on this page) -->
  <header id="spondle-header"></header>

  <main class="max-w-2xl mx-auto px-3 sm:px-6 py-10">
    <form id="create-event-form" class="space-y-6">

      <!-- =========================
           SECTION 1: EVENT BASICS
           ========================= -->
      <section class="card w-full px-3 sm:px-6 py-6" id="card-event-basics">
        <h1 class="text-3xl font-bold text-white mb-6">Event Basics</h1>

        <div class="mb-5">
          <label for="event_name" class="block text-sm text-gray-300 mb-2">Event Name</label>
          <input id="event_name" name="event_name" type="text"
                 class="input-dark p-3 rounded-lg border border-gray-700"
                 placeholder="e.g. Friday Night Comedy" />
        </div>

        <div>
          <label for="description" class="block text-sm text-gray-300 mb-2">Description</label>
          <textarea id="description" name="description" rows="6"
                    class="input-dark p-3 rounded-lg border border-gray-700"
                    placeholder="Tell people what this event is about..."></textarea>
        </div>
      </section>

      <!-- =========================
           ===== IMAGE CAROUSEL START =====
           SECTION 2: IMAGE CAROUSEL PLACEHOLDER
           (Category + carousel will be inserted here)
           ===== IMAGE CAROUSEL END =====
           ========================= -->
      <section class="card w-full px-3 sm:px-6 py-6" id="card-image-carousel">
        <h2 class="text-3xl font-bold text-white mb-6">Images &amp; Category</h2>
        <div class="placeholder-panel p-6 text-gray-300">
          <p class="mb-2 font-medium text-gray-200">Placeholder</p>
          <p class="text-sm">
            The full <span class="font-semibold">image carousel</span> (including the
            <span class="font-semibold">Category</span> selector) will be inserted here.
          </p>
        </div>
      </section>

      <!-- =========================
           ===== SCHEDULE START =====
           SECTION 3: SCHEDULE PLACEHOLDER
           (Single / Recurring / Tour will be inserted here)
           ===== SCHEDULE END =====
           ========================= -->
      <section class="card w-full px-3 sm:px-6 py-6" id="card-schedule">
        <h2 class="text-3xl font-bold text-white mb-6">Schedule</h2>
        <div class="placeholder-panel p-6 text-gray-300">
          <p class="mb-2 font-medium text-gray-200">Placeholder</p>
          <p class="text-sm">
            The full <span class="font-semibold">Schedule</span> component (Single / Recurring / Tour) will be inserted here.
          </p>
        </div>
      </section>

      <!-- =========================
           SECTION 4: FINAL SETTINGS
           (Visibility + Publish + Submit)
           ========================= -->
      <section class="card w-full px-3 sm:px-6 py-6" id="card-final-settings">
        <h2 class="text-3xl font-bold text-white mb-6">Final Settings</h2>

        <div class="grid gap-5">
          <div>
            <label for="visibility" class="block text-sm text-gray-300 mb-2">Visibility</label>
            <select id="visibility" name="visibility"
                    class="input-dark p-3 rounded-lg border border-gray-700">
              <option value="public" selected>Public</option>
              <option value="private">Private</option>
            </select>
          </div>

          <div>
            <label for="publish_status" class="block text-sm text-gray-300 mb-2">Publish Status</label>
            <select id="publish_status" name="publish_status"
                    class="input-dark p-3 rounded-lg border border-gray-700">
              <option value="draft" selected>Draft</option>
              <option value="published">Published</option>
            </select>
          </div>

          <div>
            <label class="block text-sm text-gray-300 mb-2">Organiser ID (temporary)</label>
            <input id="organiser_id_display" class="input-dark p-3 rounded-lg border border-gray-700"
                   type="text" value="Loading user..." readonly />
            <input id="organiser_id" name="organiser_id" type="hidden" />
            <p class="text-xs text-gray-400 mt-2">Shown for now; will be hidden/automatic later.</p>
          </div>

          <div class="flex items-center gap-3 pt-2">
            <button id="submitBtn"
                    class="rounded-2xl px-5 py-3 font-medium bg-blue-600 hover:bg-blue-700"
                    type="submit">Submit Event</button>
            <button id="resetBtn"
                    class="rounded-2xl px-5 py-3 font-medium bg-gray-700 hover:bg-gray-600"
                    type="button">Reset</button>
          </div>
        </div>
      </section>
    </form>
  </main>

  <!-- Optional layout script if you want header/sidebar -->
  <script type="module" src="./spondle-layout.js"></script>

  <!-- Supabase for organiser ID display -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://jvuunvnbpdfrttusgelz.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2dXVudm5icGRmcnR0dXNnZWx6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0Nzk0NjksImV4cCI6MjA3MzA1NTQ2OX0.i5-X-GsirwcZl0CdAfGsA6qM4ml5itnekPh0RoDCPVY";
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    (async () => {
      try {
        const { data: { user }, error } = await supabaseClient.auth.getUser();
        const display = document.getElementById("organiser_id_display");
        const hidden = document.getElementById("organiser_id");

        if (error) {
          console.error(error);
          display.value = "Not signed in";
          return;
        }
        if (user?.id) {
          display.value = user.id;
          hidden.value = user.id;
        } else {
          display.value = "Not signed in";
        }
      } catch (e) {
        console.error(e);
        document.getElementById("organiser_id_display").value = "Error loading user";
      }
    })();

    document.getElementById("create-event-form").addEventListener("submit", (e) => {
      e.preventDefault(); // template-only (no DB writes yet)
      console.log("[Template] Submit clicked.");
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      document.getElementById("create-event-form").reset();
    });
  </script>
</body>
</html>
