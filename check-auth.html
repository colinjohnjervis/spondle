<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Check Supabase Auth</title>
  <meta name="color-scheme" content="dark" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex flex-col items-center justify-center h-screen text-center">
  <h1 class="text-2xl font-bold mb-4">Supabase Auth Diagnostic</h1>
  <p id="status" class="text-lg">Checking session...</p>

  <!-- Supabase UMD build -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.1/dist/umd/supabase.js"></script>

  <script>
    const supabase = window.supabase.createClient(
      "https://jvuunvnbpdfrttusgelz.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp2dVVudm5icGRmcnR0dXNnZWx6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0Nzk0NjksImV4cCI6MjA3MzA1NTQ2OX0.i5-X-GsirwcZl0CdAfGsA6qM4ml5itnekPh0RoDCPVY"
    );

    (async () => {
      try {
        const { data: { session }, error: sessionErr } = await supabase.auth.getSession();
        const { data: { user }, error: userErr } = await supabase.auth.getUser();

        const status = document.getElementById("status");
        if (sessionErr) {
          status.textContent = "⚠️ Session error: " + sessionErr.message;
          return;
        }

        if (!session) {
          status.textContent = "❌ No active session detected";
          return;
        }

        if (userErr) {
          status.textContent = "⚠️ User error: " + userErr.message;
          return;
        }

        status.innerHTML = `
          ✅ <strong>Session active</strong><br>
          <span class="text-blue-400">User ID:</span> ${user?.id || "N/A"}
        `;
      } catch (err) {
        document.getElementById("status").textContent = "Error: " + err.message;
      }
    })();
  </script>
</body>
</html>
