<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Spondle ‚Äî Event</title>

  <!-- Inline CSS so this page never breaks styling -->
  <style>
    :root{--bg:#0e0f12;--panel:#151820;--muted:#a7b0c0;--text:#e8eef7;--brand:#6bf0a8;--brand-2:#8bc6ff;--card:#1c2130}
    *{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    header{position:sticky;top:0;background:rgba(14,15,18,.7);backdrop-filter:blur(8px);border-bottom:1px solid #212533}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-2));display:inline-block}
    .actions{display:flex;gap:10px}
    .btn{padding:10px 14px;border:1px solid #2a3042;border-radius:10px;background:#12151d;color:var(--text);cursor:pointer;font:inherit}
    .btn:hover{border-color:#3a425a}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b1020;border:0;font-weight:700}
    .section{padding:24px 0}
    .hero-card{background:var(--panel);border:1px solid #22283a;border-radius:16px;padding:18px}
    .tagline{color:var(--muted);max-width:52ch}
    .eyebrow{color:var(--brand);font-weight:700;font-size:.9rem;letter-spacing:.6px;text-transform:uppercase}
    .thumb{aspect-ratio:16/9;background:linear-gradient(135deg,#2a3146,#1f2536);display:flex;align-items:center;justify-content:center;color:#cbd6ff;font-weight:700;position:relative;border-radius:14px;margin:14px 0;overflow:hidden}
    .badge{position:absolute;margin:10px;padding:6px 10px;border-radius:999px;background:#111726;border:1px solid #2a3042;font-size:.8rem;backdrop-filter:blur(2px)}
    .cta-row{margin-top:14px;display:flex;gap:12px;flex-wrap:wrap}
    footer{margin-top:36px;border-top:1px solid #22283a}
    .foot{display:flex;flex-wrap:wrap;align-items:center;gap:12px;justify-content:space-between;padding:18px 0;color:var(--muted);font-size:.95rem}
    /* Share bar */
    .sharebar{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-top:10px}
    .share-icons{display:flex;gap:8px;align-items:center}
    .share-icons .icon{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid #2a3042;border-radius:10px;background:#12151d;cursor:pointer}
    .share-icons .icon:hover{border-color:#3a425a}
    .sharebar .share-native{padding:8px 12px}
    .share-toast{color:var(--brand);font-size:.95rem}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="logo"></span><a href="index.html">Spondle</a></div>
      <div class="actions">
        <a class="btn" href="events.html">Explore Events</a>
        <a class="btn primary" href="organisers.html">For Organisers</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section" id="event-section" aria-live="polite"></section>
  </main>

  <footer>
    <div class="container foot"><div>¬© <span id="y"></span> Spondle</div></div>
  </footer>

  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
  <!-- Auth for favourites -->
  <script src="auth.js"></script>

  <script>
    // ------- Dummy events (sample-*) -------
    const FALLBACK = {
      "sample-1": {id:"sample-1", title:"The Harbourside Sessions", city:"Bristol", dateLabel:"12 Sep", venue:"The Louisiana", time:"19:30‚Äì22:30", price:"Free Entry", category:"üéµ Live Music", address:"Wapping Rd, Bristol", postcode:"BS1 6UA", description:"An intimate evening of live indie and alt performances on the harbourside."},
      "sample-2": {id:"sample-2", title:"Friday Night Laughs", city:"Manchester", dateLabel:"14 Sep", venue:"Northern Quarter", time:"20:00‚Äì22:00", price:"¬£12", category:"üé≠ Comedy", address:"Oldham St, Manchester", postcode:"M1 1JQ", description:"A fast-paced showcase of up-and-coming comedians and surprise headliners."},
      "sample-3": {id:"sample-3", title:"Riverside Street Food", city:"Cardiff", dateLabel:"15 Sep", venue:"Market Square", time:"11:00‚Äì17:00", price:"Family", category:"üèû Community", address:"Market Rd, Cardiff", postcode:"CF5 1QE", description:"Local vendors, global flavours. Family-friendly with live acoustic sets."},
      "sample-4": {id:"sample-4", title:"Craft Beer Festival", city:"Leeds", dateLabel:"18 Sep", venue:"City Brewery Hall", time:"12:00‚Äì23:00", price:"¬£20", category:"üç∫ Food & Drink", address:"Brewery Lane, Leeds", postcode:"LS1 2XY", description:"Explore over 100 craft beers from top UK breweries, plus live music and street food."},
      "sample-5": {id:"sample-5", title:"Vintage Vinyl Market", city:"London", dateLabel:"20 Sep", venue:"Camden Market", time:"10:00‚Äì18:00", price:"Free Entry", category:"üíø Market", address:"Camden High St, London", postcode:"NW1 8NH", description:"A vinyl lover's paradise: stalls of records, collectibles, and retro gear."},
      "sample-6": {id:"sample-6", title:"Outdoor Cinema Night", city:"Brighton", dateLabel:"22 Sep", venue:"Brighton Seafront", time:"20:30‚Äì23:00", price:"¬£10", category:"üé¨ Film", address:"Brighton Seafront", postcode:"BN1 1EE", description:"Watch cult classics under the stars with food trucks and cosy blankets."},
      "sample-7": {id:"sample-7", title:"Tech Meetup & Networking", city:"Birmingham", dateLabel:"25 Sep", venue:"TechHub Central", time:"18:00‚Äì21:00", price:"Free", category:"üíª Networking", address:"Innovation Way, Birmingham", postcode:"B1 1AA", description:"Connect with local developers, startups, and tech leaders. Talks + free pizza."},
      "sample-8": {id:"sample-8", title:"Charity Fun Run", city:"Glasgow", dateLabel:"27 Sep", venue:"Kelvingrove Park", time:"09:00‚Äì12:00", price:"¬£15 Donation", category:"üèÉ‚Äç‚ôÇÔ∏è Sports", address:"Kelvingrove Park, Glasgow", postcode:"G3 7LH", description:"5K charity fun run through Glasgow‚Äôs scenic park. All ages welcome."},
      "sample-9": {id:"sample-9", title:"Open Mic Poetry Night", city:"Liverpool", dateLabel:"30 Sep", venue:"The Verse Bar", time:"19:00‚Äì22:00", price:"Free Entry", category:"üìñ Arts & Culture", address:"Hope St, Liverpool", postcode:"L1 9BX", description:"Celebrate spoken word and poetry with local talent. Sign up slots available."}
    };

    const section = document.getElementById("event-section");
    const params = new URLSearchParams(location.search);
    const id = params.get("id");
    const data = FALLBACK[id];

    if (!data) {
      section.innerHTML = `<p class="tagline">Sorry, we couldn‚Äôt find that event.</p>
                           <a class="btn" href="events.html">Back to events</a>`;
    } else {
      section.innerHTML = `
        <div class="hero-card">
          <div class="eyebrow">${data.city}${data.dateLabel ? ' ‚Ä¢ '+data.dateLabel : ''}</div>
          <h1 style="margin:.2em 0 .4em">${data.title}</h1>
          <p class="tagline">${data.category || ''}</p>
        </div>

        <div class="thumb">
          <span class="badge">${data.city}${data.dateLabel ? ' ‚Ä¢ '+data.dateLabel : ''}</span>${data.category || ''}
        </div>

        <div class="hero-card" id="details-card">
          <strong>Details</strong>
          <ul style="margin:10px 0 0 20px">
            ${row('Venue', data.venue)}
            ${row('Time', data.time)}
            ${row('Price', data.price)}
            ${row('Address', (data.address||'') + (data.postcode ? ', '+data.postcode : ''))}
          </ul>
          <p style="margin:12px 0 0">${data.description || ''}</p>

          <div class="cta-row">
            <button class="btn" id="favBtn" aria-label="Save to favourites">‚ô° Save</button>
            ${data.postcode ? `<a class="btn" target="_blank" href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.postcode)}">Get directions</a>` : ''}
            <a class="btn" href="events.html">Back to events</a>
          </div>

          <div id="share-mount"></div>
        </div>
      `;

      // Favourite button
      const favBtn = document.getElementById('favBtn');
      const updateFav = ()=> favBtn.textContent = (window.SpondleAuth?.isFavourite?.(data.id) ? '‚ô• Saved' : '‚ô° Save');
      updateFav();
      favBtn.addEventListener('click', ()=>{
        const u = window.SpondleAuth?.currentUser?.();
        if (!u) { location.href = 'login.html?next=' + encodeURIComponent(location.pathname + location.search); return; }
        window.SpondleAuth.toggleFavourite(data.id);
        updateFav();
      });

      // Inline share bar
      const shareMount = document.getElementById('share-mount');
      const eventUrl = `${location.origin}${location.pathname}?id=${encodeURIComponent(data.id)}`;
      shareMount.appendChild(makeShareBar({ title: data.title, url: eventUrl }));
    }

    function row(label, val){ return val ? `<li><b>${label}:</b> ${val}</li>` : ''; }

    function makeShareBar({ title, url }) {
      const bar = document.createElement('div'); bar.className='sharebar';
      const nativeBtn = document.createElement('button'); nativeBtn.className='btn share-native'; nativeBtn.textContent='üì≤ Share';
      nativeBtn.addEventListener('click', async () => {
        if (navigator.share) { try { await navigator.share({ title, text:title, url }); } catch {} }
        else { try { await navigator.clipboard.writeText(url); toast('Link copied'); } catch {} }
      });
      const icons = document.createElement('div'); icons.className='share-icons';
      icons.innerHTML = `
        <a class="icon" href="https://wa.me/?text=${encodeURIComponent(title)}%20${encodeURIComponent(url)}" target="_blank" rel="noopener" title="WhatsApp">üü¢</a>
        <a class="icon" href="https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(url)}" target="_blank" rel="noopener" title="X (Twitter)">‚úñÔ∏è</a>
        <a class="icon" href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}" target="_blank" rel="noopener" title="Facebook">üìò</a>
        <a class="icon" href="mailto:?subject=${encodeURIComponent(title)}&body=${encodeURIComponent(title)}%0A${encodeURIComponent(url)}" title="Email">‚úâÔ∏è</a>
        <button class="icon" id="copyLink" title="Copy link">üîó</button>
      `;
      const toastEl = document.createElement('span'); toastEl.className='share-toast'; toastEl.hidden=true; toastEl.textContent='Link copied';
      icons.querySelector('#copyLink').addEventListener('click', async ()=>{ try{ await navigator.clipboard.writeText(url); toast('Link copied'); }catch{} });
      bar.appendChild(nativeBtn); bar.appendChild(icons); bar.appendChild(toastEl); return bar;
      function toast(msg){ toastEl.textContent=msg; toastEl.hidden=false; setTimeout(()=>toastEl.hidden=true,1200); }
    }
  </script>
</body>
</html>
