<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spondle â€“ My Favourites</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <link rel="stylesheet" href="styles.css?v=16">
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="logo"></span><a href="index.html">Spondle</a></div>
      <div class="actions">
        <a class="btn" href="events.html">Explore Events</a>
        <a class="btn primary" href="favourites.html">Favourites <span class="badge" data-fav-count style="display:none">0</span></a>
        <a class="btn" href="organisers.html">For Organisers</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section">
      <h1>My Favourites</h1>
      <p class="tagline">Events youâ€™ve saved. Stored on this device for now.</p>
    </section>

    <section class="section">
      <div class="grid" id="grid"></div>
      <p id="empty" class="tagline" style="display:none">You havenâ€™t saved anything yet. <a href="events.html">Find events</a>.</p>
    </section>
  </main>

  <footer>
    <div class="container foot"><div>Â© <span id="y"></span> Spondle â€¢ build v16</div></div>
  </footer>

  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
  <script src="favs.js?v=16"></script>
  <script>
    const EVENTS = [
      { id:"sample-1", title:"The Harbourside Sessions", city:"Bristol",   dateLabel:"12 Sep", venue:"The Louisiana",    time:"19:30â€“22:30", price:"Free Entry",   category:"Live Music" },
      { id:"sample-2", title:"Friday Night Laughs",       city:"Manchester",dateLabel:"14 Sep", venue:"Northern Quarter", time:"20:00â€“22:00", price:"Â£12",          category:"Comedy" },
      { id:"sample-3", title:"Riverside Street Food",     city:"Cardiff",   dateLabel:"15 Sep", venue:"Market Square",    time:"11:00â€“17:00", price:"Family",       category:"Community" },
      { id:"sample-4", title:"Craft Beer Festival",       city:"Leeds",     dateLabel:"18 Sep", venue:"City Brewery Hall",time:"12:00â€“23:00", price:"Â£20",          category:"Food & Drink" },
      { id:"sample-5", title:"Vintage Vinyl Market",      city:"London",    dateLabel:"20 Sep", venue:"Camden Market",    time:"10:00â€“18:00", price:"Free Entry",   category:"Market" },
      { id:"sample-6", title:"Outdoor Cinema Night",      city:"Brighton",  dateLabel:"22 Sep", venue:"Brighton Seafront",time:"20:30â€“23:00", price:"Â£10",          category:"Film" },
      { id:"sample-7", title:"Tech Meetup & Networking",  city:"Birmingham",dateLabel:"25 Sep", venue:"TechHub Central",  time:"18:00â€“21:00", price:"Free",         category:"Networking" },
      { id:"sample-8", title:"Charity Fun Run",           city:"Glasgow",   dateLabel:"27 Sep", venue:"Kelvingrove Park", time:"09:00â€“12:00", price:"Â£15 Donation", category:"Sports" },
      { id:"sample-9", title:"Open Mic Poetry Night",     city:"Liverpool", dateLabel:"30 Sep", venue:"The Verse Bar",    time:"19:00â€“22:00", price:"Free Entry",   category:"Arts & Culture" },
    ];
    const mapById = Object.fromEntries(EVENTS.map(e=>[e.id,e]));
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');

    function render(){
      const favIds = Favs.all();
      if(!favIds.length){ grid.innerHTML=""; empty.style.display="block"; return; }
      empty.style.display="none";
      grid.innerHTML = favIds.map(id=>{
        const ev = mapById[id]; if(!ev) return '';
        return `
          <article class="card">
            <a href="event.html?id=${ev.id}" style="display:block;color:inherit">
              <div class="thumb"><span class="badge">${ev.city || ""} â€¢ ${ev.dateLabel || ""}</span> ðŸŽ« ${ev.category || ""}</div>
              <div class="content">
                <h3>${ev.title}</h3>
                <p class="meta">${ev.venue || ""}${ev.time ? " â€¢ " + ev.time : ""}</p>
                <div class="row"><span class="chip">${ev.price || "Free"}</span><span class="muted">Details â†’</span></div>
              </div>
            </a>
            <button class="btn" data-unfave="${ev.id}" style="position:absolute;top:10px;right:10px">Remove</button>
          </article>
        `;
      }).join('');

      grid.querySelectorAll('[data-unfave]').forEach(btn=>{
        btn.addEventListener('click',e=>{
          e.preventDefault(); e.stopPropagation();
          Favs.remove(btn.getAttribute('data-unfave'));
          render();
        });
      });
    }
    render();
  </script>
</body>
</html>
