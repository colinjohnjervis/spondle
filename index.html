<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spondle — What’s on near you</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --bg:#0b1220; --panel:#121a2b; --panel2:#0f1729; --muted:#8aa0b6; }
    body{background:var(--bg); color:#e6eef7; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
    .brand-dot{width:.65rem;height:.65rem;border-radius:9999px;background:#22d3ee;box-shadow:0 0 12px #22d3ee;}
    .glass{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.08); }
    .btn{background:linear-gradient(90deg,#58c4ff,#7ee3ff); color:#0b1220; font-weight:700;}
    .btn-muted{background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1);}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08)}
    .heart{transition:transform .1s ease;}
    .heart:active{transform:scale(.9)}
    /* Sidebar (unchanged) */
    .drawer{position:fixed; inset:0; display:none;}
    .drawer.open{display:block;}
    .drawer .shade{position:absolute; inset:0; background:rgba(0,0,0,.4); opacity:0; transition:opacity .25s ease}
    .drawer.open .shade{opacity:1}
    .drawer .panel{position:absolute; top:0; left:0; height:100%; width:84%; max-width:360px; background:var(--panel2);
      transform:translateX(-100%); transition:transform .25s ease}
    .drawer.open .panel{transform:translateX(0)}
  </style>
</head>
<body>

  <!-- Header -->
  <header class="sticky top-0 z-40 border-b border-white/5 bg-[rgba(9,14,26,.75)] backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="brand-dot"></span>
        <span class="text-xl font-semibold">Spondle</span>
      </div>
      <button id="openMenu" aria-label="Open menu"
        class="p-2 rounded-lg hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-cyan-400">
        <!-- real hamburger icon -->
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#E6EEF7" stroke-width="2" stroke-linecap="round">
          <path d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Drawer / Sidebar (unchanged) -->
  <div id="drawer" class="drawer">
    <div class="shade" id="closeShade"></div>
    <aside class="panel flex flex-col">
      <div class="px-4 py-4 flex items-center justify-between border-b border-white/5">
        <div class="flex items-center gap-2">
          <span class="brand-dot"></span>
          <span class="text-lg font-semibold">Spondle</span>
        </div>
        <button id="closeMenu" aria-label="Close menu"
          class="p-2 rounded-lg hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-cyan-400">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#E6EEF7" stroke-width="2" stroke-linecap="round">
            <path d="M6 6l12 12M18 6l-12 12"/>
          </svg>
        </button>
      </div>

      <nav class="flex-1 overflow-y-auto px-3 py-2">
        <a href="events.html" class="block px-3 py-3 rounded-lg hover:bg-white/5">Explore events</a>
        <a href="favourites.html" class="block px-3 py-3 rounded-lg hover:bg-white/5">Favourites</a>
        <a href="organisers.html" class="block px-3 py-3 rounded-lg hover:bg-white/5">For organisers</a>
        <a href="login.html" class="block px-3 py-3 rounded-lg hover:bg-white/5">Sign in / Account</a>

        <div class="mt-6 mb-2 px-3 text-sm text-white/60">Quick links</div>
        <a href="#popular" class="block px-3 py-3 rounded-lg hover:bg-white/5">Popular right now</a>
        <a href="#latest" class="block px-3 py-3 rounded-lg hover:bg-white/5">Latest events</a>
      </nav>

      <div class="px-4 py-4 border-t border-white/5 text-sm text-white/50">© 2025 Spondle</div>
    </aside>
  </div>

  <!-- Hero -->
  <section class="mx-auto max-w-6xl px-4">
    <div class="glass rounded-2xl mt-6 p-6 md:p-8">
      <h1 class="text-3xl md:text-4xl font-extrabold mb-3">Discover what’s on near you</h1>
      <p class="text-white/70 mb-6 max-w-2xl">Gigs, comedy, food markets, film nights, community events and more — across the UK.</p>
      <div class="flex gap-3">
        <a href="events.html" class="btn px-5 py-3 rounded-xl">Search events</a>
        <a href="organisers.html" class="btn-muted px-5 py-3 rounded-xl">List your event</a>
      </div>
    </div>
  </section>

  <!-- Latest -->
  <section id="latest" class="mx-auto max-w-6xl px-4 mt-8">
    <h2 class="text-2xl md:text-3xl font-extrabold mb-4">Latest events</h2>
    <div id="eventsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
    <div class="flex justify-center">
      <button id="loadMoreBtn" class="mt-6 px-5 py-3 rounded-xl btn-muted">Load more</button>
    </div>
  </section>

  <!-- Template for event card -->
  <template id="eventCardTpl">
    <article class="card rounded-2xl overflow-hidden">
      <div class="relative h-40">
        <img class="w-full h-full object-cover" />
        <button class="absolute top-3 right-3 rounded-full bg-black/40 backdrop-blur p-2 heart" aria-label="Add to favourites">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
            <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/>
          </svg>
        </button>
      </div>
      <div class="p-4">
        <div class="flex items-center gap-2 text-xs text-white/70 mb-2">
          <span class="px-2 py-1 rounded-full bg-white/5 category"></span>
          <span>•</span>
          <span class="date"></span>
        </div>
        <h3 class="text-lg font-bold title mb-1"></h3>
        <p class="text-white/70 venue"></p>
      </div>
      <div class="px-4 pb-4">
        <a class="inline-block px-3 py-2 rounded-lg btn-muted text-sm detailsLink">View details</a>
      </div>
    </article>
  </template>

  <script>
    // Drawer open/close (unchanged)
    const drawer = document.getElementById('drawer');
    document.getElementById('openMenu').addEventListener('click', ()=>drawer.classList.add('open'));
    document.getElementById('closeMenu').addEventListener('click', ()=>drawer.classList.remove('open'));
    document.getElementById('closeShade').addEventListener('click', ()=>drawer.classList.remove('open'));

    // ---- Event data + pagination ----
    const PAGE_SIZE = 12;
    let offset = 0;

    // Base sample events (kept simple)
    window.eventsData = [
      {
        id: "ev-001",
        title: "The Harbourside Sessions",
        date: "Sep 12",
        city: "Bristol",
        category: "Live Music",
        venue: "The Louisiana",
        priceLabel: "Free Entry",
        image: "https://images.unsplash.com/photo-1540039155733-5bb30b53aa14?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: "ev-002",
        title: "Acoustic Sessions at The Fleece",
        date: "Sep 21",
        city: "Bristol",
        category: "Live Music",
        venue: "The Fleece",
        priceLabel: "£8",
        image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: "ev-003",
        title: "Family Science Day",
        date: "Sep 28",
        city: "Manchester",
        category: "Community",
        venue: "Science and Industry Mus.",
        priceLabel: "£6",
        image: "https://images.unsplash.com/photo-1551836022-4c4c79ecde51?q=80&w=1600&auto=format&fit=crop"
      }
    ];

    // DATA BOOSTER (only change): generate more mock events so "Load more" works.
    (() => {
      const pics = [
        "https://images.unsplash.com/photo-1489515217757-5fd1be406fef?q=80&w=1600&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1508609349937-5ec4ae374ebf?q=80&w=1600&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?q=80&w=1600&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1475721027785-f74eccf877e2?q=80&w=1600&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1520975922203-bc1e37a1c9c5?q=80&w=1600&auto=format&fit=crop"
      ];
      const cats = ["Comedy","Food & Drink","Film","Community","Theatre","Live Music"];
      const cities = ["Bristol","Leeds","Cardiff","Manchester","Edinburgh","Liverpool","Glasgow","London"];

      const startIdx = window.eventsData.length + 1;
      const targetTotal = 36; // enough for 3 "pages"
      for (let i = startIdx; i <= targetTotal; i++) {
        const img = pics[i % pics.length];
        const cat = cats[i % cats.length];
        const city = cities[i % cities.length];
        const day = ((i % 28) + 1).toString().padStart(2,'0');
        window.eventsData.push({
          id: `ev-${i.toString().padStart(3,'0')}`,
          title: `${cat} Night #${i}`,
          date: `Oct ${day}`,
          city,
          category: cat,
          venue: `${city} Arts Hub`,
          priceLabel: (i % 3 === 0) ? "Free Entry" : `£${(i % 5 + 5)}`,
          image: img
        });
      }
    })();

    // Favourites store
    const FAV_KEY = 'sp_favs_v1';
    const getFavs = ()=> new Set(JSON.parse(localStorage.getItem(FAV_KEY) || '[]'));
    const saveFavs = (set)=> localStorage.setItem(FAV_KEY, JSON.stringify(Array.from(set)));

    // Render a slice
    function renderNext() {
      const grid = document.getElementById('eventsGrid');
      const tpl  = document.getElementById('eventCardTpl');
      const favs = getFavs();

      const slice = window.eventsData.slice(offset, offset + PAGE_SIZE);
      slice.forEach(ev => {
        const node = tpl.content.cloneNode(true);
        const img  = node.querySelector('img');
        const cat  = node.querySelector('.category');
        const date = node.querySelector('.date');
        const title= node.querySelector('.title');
        const venue= node.querySelector('.venue');
        const link = node.querySelector('.detailsLink');
        const heart= node.querySelector('.heart');

        img.src = ev.image;
        img.alt = ev.title;
        cat.textContent = ev.category;
        date.textContent = `${ev.city} • ${ev.date}`;
        title.textContent = ev.title;
        venue.textContent = `${ev.venue}`;
        link.href = `event.html?id=${encodeURIComponent(ev.id)}`;

        const active = favs.has(ev.id);
        if (active) heart.style.background = "rgba(236,72,153,.9)";

        heart.addEventListener('click', (e)=>{
          e.stopPropagation();
          const set = getFavs();
          if (set.has(ev.id)) { set.delete(ev.id); heart.style.background="rgba(0,0,0,.4)"; }
          else { set.add(ev.id); heart.style.background="rgba(236,72,153,.9)"; }
          saveFavs(set);
        });

        grid.appendChild(node);
      });

      offset += slice.length;
      const btn = document.getElementById('loadMoreBtn');
      if (offset >= window.eventsData.length) {
        btn.disabled = true;
        btn.classList.add('opacity-50','cursor-not-allowed');
      }
    }

    document.getElementById('loadMoreBtn').addEventListener('click', renderNext);
    // initial page
    renderNext();
  </script>
</body>
</html>
