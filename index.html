<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spondle — Discover what’s on near you</title>

  <!-- Uses your existing site styles; keep this link as-is -->
  <link rel="stylesheet" href="app.v15.css" />

  <style>
    /* --- Lightweight additions to sit on top of your existing styles --- */
    :root {
      --bg: #0c0f14;
      --panel: #121722;
      --muted: #9aa4b2;
      --brand1: #5be4ff;
      --brand2: #7aa8ff;
      --card: #121722;
      --cardBorder: rgba(255,255,255,0.06);
      --heart: #ff5b87;
    }

    body { background: var(--bg); color: #eef2f6; }

    /* Header */
    .site-header{
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(8px); background: rgba(12,15,20,0.75);
      border-bottom: 1px solid var(--cardBorder);
    }
    .header-inner{
      max-width: 960px; margin: 0 auto; padding: 14px 16px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; font-size:20px}
    .brand-dot{width:10px; height:10px; border-radius:50%; background: #53e0a8; box-shadow:0 0 10px #53e0a8}
    .hamburger{
      width:40px; height:40px; display:grid; place-items:center;
      border-radius:10px; border:1px solid var(--cardBorder); background: rgba(255,255,255,0.04);
    }
    .hamburger span, .hamburger span::before, .hamburger span::after{
      display:block; width:18px; height:2px; background:#e8eef6; content:""; position:relative; border-radius:2px;
    }
    .hamburger span::before{ position:absolute; top:-6px; }
    .hamburger span::after{ position:absolute; top:6px; }

    /* Drawer */
    .drawer-backdrop{
      position: fixed; inset:0; background: rgba(0,0,0,0.5); opacity:0; pointer-events:none; transition:opacity .25s;
    }
    .drawer{
      position: fixed; top:0; right:-320px; width:300px; height:100dvh;
      background: var(--panel); border-left:1px solid var(--cardBorder);
      transition: right .25s; padding:18px;
      display:flex; flex-direction:column; gap:12px;
    }
    .drawer.open{ right:0; }
    .drawer-backdrop.open{ opacity:1; pointer-events:auto; }
    .drawer h3{ margin:6px 0 8px; font-size:14px; color:var(--muted); text-transform:uppercase; letter-spacing:.08em }
    .nav-link{
      display:flex; align-items:center; gap:10px; padding:12px; border-radius:12px;
      border:1px solid var(--cardBorder); background:rgba(255,255,255,0.03);
    }
    .nav-link:hover{ background:rgba(255,255,255,0.06) }

    /* Hero */
    .hero{
      max-width:960px; margin: 18px auto 8px; padding: 16px;
    }
    .hero-card{
      background: radial-gradient(120% 120% at 0% 0%, rgba(123,168,255,.14), rgba(91,228,255,.06)) , var(--panel);
      border:1px solid var(--cardBorder); border-radius:18px; padding:22px;
    }
    .btn-row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:16px }
    .btn{
      padding:12px 16px; border-radius:12px; border:1px solid var(--cardBorder);
      background: linear-gradient(90deg, var(--brand1), var(--brand2));
      color:#0b1020; font-weight:700;
    }
    .btn.secondary{ background: rgba(255,255,255,0.04); color:#e7edf7 }

    /* List */
    .section{ max-width:960px; margin: 10px auto 80px; padding: 0 16px }
    .section h2{ font-size:28px; margin: 18px 0 }

    .grid{ display:grid; gap:14px }
    @media (min-width: 720px){ .grid{ grid-template-columns: 1fr 1fr } }

    .card{
      position: relative;
      border:1px solid var(--cardBorder); border-radius:16px; overflow:hidden; background: var(--card);
    }
    .thumb{
      position: relative; height:160px; background:#151a25; overflow:hidden;
    }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; filter:brightness(0.92) }
    .heart{
      position:absolute; top:10px; right:10px; width:36px; height:36px; border-radius:999px;
      display:grid; place-items:center; background: rgba(0,0,0,0.35); border:1px solid var(--cardBorder);
    }
    .heart svg{ width:18px; height:18px; fill:none; stroke:#fff; stroke-width:2 }
    .heart.active{ background: rgba(255,91,135,0.18); border-color: rgba(255,91,135,0.5) }
    .heart.active svg{ fill: var(--heart); stroke: var(--heart) }

    .card-body{ padding:14px 14px 16px }
    .eyebrow{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; color:#b8c2cf; font-size:12px }
    .pill{ padding:4px 8px; border-radius:999px; background: rgba(255,255,255,0.06); border:1px solid var(--cardBorder) }
    .title{ font-size:18px; font-weight:800; margin: 8px 0 }
    .meta{ color:#b8c2cf }

    .loadmore-wrap{ display:flex; justify-content:center; padding: 18px 0 }
    .loadmore{ padding:12px 16px; border-radius:12px; border:1px solid var(--cardBorder); background:rgba(255,255,255,0.06) }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="header-inner">
      <a href="/" class="brand">
        <span class="brand-dot"></span>
        <span>Spondle</span>
      </a>
      <button id="btnMenu" class="hamburger" aria-label="Open menu"><span></span></button>
    </div>
  </header>

  <!-- Drawer -->
  <div id="backdrop" class="drawer-backdrop" aria-hidden="true"></div>
  <aside id="drawer" class="drawer" aria-hidden="true" aria-label="Sidebar">
    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:6px">
      <div class="brand" style="font-size:18px"><span class="brand-dot"></span> Spondle</div>
      <button id="btnClose" class="hamburger" aria-label="Close menu"><span></span></button>
    </div>

    <h3>Browse</h3>
    <a class="nav-link" href="events.html">Explore events</a>
    <a class="nav-link" href="favourites.html">Favourites</a>

    <h3>For organisers</h3>
    <a class="nav-link" href="organiser-dashboard.html">Organiser dashboard</a>
    <a class="nav-link" href="my-drafts.html">My drafts</a>
    <a class="nav-link" href="microsite-chooser.html">Microsite templates</a>

    <h3>Account</h3>
    <a class="nav-link" href="login.html">Sign in / Create account</a>
  </aside>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-card">
      <h1 style="font-size:clamp(26px,4.5vw,40px); line-height:1.15; margin:0 0 10px">
        Discover what’s on near you
      </h1>
      <p style="color:#b8c2cf; margin:0">
        Gigs, comedy, food markets, film nights, community events and more — across the UK.
      </p>
      <div class="btn-row">
        <a class="btn" href="events.html">Search events</a>
        <a class="btn secondary" href="organiser-dashboard.html">List your event</a>
      </div>
    </div>
  </section>

  <!-- Latest events -->
  <section class="section">
    <h2>Latest events</h2>
    <div id="list" class="grid"></div>
    <div class="loadmore-wrap">
      <button id="btnMore" class="loadmore">Load more</button>
    </div>
  </section>

  <script>
    // ---------- Drawer ----------
    const drawer = document.getElementById('drawer');
    const backdrop = document.getElementById('backdrop');
    const openDrawer = () => { drawer.classList.add('open'); backdrop.classList.add('open'); };
    const closeDrawer = () => { drawer.classList.remove('open'); backdrop.classList.remove('open'); };
    document.getElementById('btnMenu').addEventListener('click', openDrawer);
    document.getElementById('btnClose').addEventListener('click', closeDrawer);
    backdrop.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    // ---------- Event Data (sample set; replace with your real feed when ready) ----------
    const eventsData = [
      { id:'e1', title:'The Harbourside Sessions', city:'Bristol', date:'12 Sep', cat:'Live Music', venue:'The Louisiana', time:'19:30–22:30', price:'Free Entry', img:'https://images.unsplash.com/photo-1506157786151-b8491531f063?q=80&w=1200&auto=format&fit=crop' },
      { id:'e2', title:'Acoustic Sessions at The Fleece', city:'Bristol', date:'21 Sep', cat:'Live Music', venue:'The Fleece', time:'19:00–22:00', price:'£8', img:'https://images.unsplash.com/photo-1483412033650-1015ddeb83d1?q=80&w=1200&auto=format&fit=crop' },
      { id:'e3', title:'Family Science Day', city:'Manchester', date:'28 Sep', cat:'Community', venue:'Science and Industry Mus.', time:'10:00–16:00', price:'£6', img:'https://images.unsplash.com/photo-1532635223-3b6b2f9d34f4?q=80&w=1200&auto=format&fit=crop' },
      { id:'e4', title:'Craft Cider Tasting', city:'Bristol', date:'11 Oct', cat:'Food & Drink', venue:'The Apple', time:'18:00–20:00', price:'£10', img:'https://images.unsplash.com/photo-1514362545857-3bc16c4c76b0?q=80&w=1200&auto=format&fit=crop' },
      { id:'e5', title:'Stand-Up Showcase', city:'Edinburgh', date:'25 Oct', cat:'Comedy', venue:'The Stand', time:'20:00–22:00', price:'£10', img:'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1200&auto=format&fit=crop' },
      // …add more as needed:
      ...Array.from({length:22}).map((_,i)=>({
        id:'eX'+(i+6),
        title:'Community Night #'+(i+1),
        city: ['Leeds','Cardiff','Brighton','Bath'][i%4],
        date: (10+i)+' Oct',
        cat: ['Community','Film','Food & Drink','Live Music'][i%4],
        venue: ['Town Hall','Luna Cinema','Market Square','The Exchange'][i%4],
        time:'19:00–22:00',
        price: ['Free Entry','£5','£7','£12'][i%4],
        img: [
          'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1200&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1200&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1498654200943-1088dd4438ae?q=80&w=1200&auto=format&fit=crop',
          'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop'
        ][i%4]
      }))
    ]);

    // ---------- Favourites (localStorage) ----------
    const FAV_KEY = 'spondle_favourites_v1';
    const getFavs = () => {
      try { return JSON.parse(localStorage.getItem(FAV_KEY) || '[]'); }
      catch { return []; }
    };
    const setFavs = (arr) => localStorage.setItem(FAV_KEY, JSON.stringify(arr));
    const isFav = (id) => getFavs().includes(id);
    const toggleFav = (id) => {
      const favs = new Set(getFavs());
      favs.has(id) ? favs.delete(id) : favs.add(id);
      setFavs([...favs]);
      // Update heart state
      const btn = document.querySelector(`button.heart[data-id="${id}"]`);
      if (btn) btn.classList.toggle('active', isFav(id));
    };

    // ---------- Render ----------
    const listEl = document.getElementById('list');
    const btnMore = document.getElementById('btnMore');
    const PAGE = 12;
    let shown = 0;

    function cardHTML(ev){
      return `
      <article class="card" data-id="${ev.id}">
        <div class="thumb">
          <img src="${ev.img}" alt="" loading="lazy" />
          <button class="heart ${isFav(ev.id)?'active':''}" data-id="${ev.id}" aria-label="Toggle favourite">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 21s-6.716-4.263-9.333-7.333C.92 11.667 2 8 5.333 8 7.54 8 9 9.667 12 12c3-2.333 4.46-4 6.667-4C22 8 23.08 11.667 21.333 13.667 18.716 16.737 12 21 12 21z"/></svg>
          </button>
        </div>
        <div class="card-body">
          <div class="eyebrow">
            <span class="pill">${ev.city} • ${ev.date}</span>
            <span class="pill">${ev.cat}</span>
          </div>
          <h3 class="title">${ev.title}</h3>
          <div class="meta">${ev.venue} • ${ev.time}</div>
          <div class="meta" style="margin-top:8px"><span class="pill">${ev.price}</span></div>
        </div>
      </article>`;
    }

    function renderNext(){
      const next = eventsData.slice(shown, shown + PAGE);
      if (!next.length){ btnMore.disabled = true; btnMore.textContent = 'All caught up'; return; }
      const html = next.map(cardHTML).join('');
      const tmp = document.createElement('div'); tmp.innerHTML = html;
      // attach handlers for hearts
      tmp.querySelectorAll('button.heart').forEach(btn=>{
        btn.addEventListener('click', (e)=>{ e.stopPropagation(); toggleFav(btn.dataset.id); });
      });
      // clicking a card goes to the event page (replace with your real URL pattern)
      tmp.querySelectorAll('.card').forEach(card=>{
        card.addEventListener('click', (e)=>{
          if (e.target.closest('button')) return;
          window.location.href = 'event.html?id=' + card.dataset.id;
        });
      });
      listEl.append(...tmp.childNodes);
      shown += next.length;
      if (shown >= eventsData.length){ btnMore.disabled = true; btnMore.textContent = 'All caught up'; }
    }

    btnMore.addEventListener('click', renderNext);
    renderNext(); // initial 12
  </script>
</body>
</html>
